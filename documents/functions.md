# 기능

**Table of Contents**

- [공통](#공통)
  - [클러스터 삭제 가능 여부 확인](#fc-dr-00021)
- [라이선스](#라이선스)
  - [라이선스 변경됨](#fc-dr-01011)
  - [라이선스 만료 확인](#fc-dr-01021)
  - [라이선스 제약사항 확인](#fc-dr-01031)
- [복구](#복구)
  - [메타데이터 재조정](#fc-dr-02011)
- [보호그룹](#보호그룹)
  - [비보호 인스턴스 목록 조회](#fc-dr-09101)
  - [보호그룹 목록 조회](#fc-dr-09011)
  - [보호그룹 조회](#fc-dr-09021)
  - [보호그룹 등록](#fc-dr-09031)
  - [보호그룹 수정](#fc-dr-09041)
  - [보호그룹 삭제](#fc-dr-09051)
  - [보호그룹 스냅샷 목록 조회](#fc-dr-09061)
  - [보호그룹 스냅샷 생성](#fc-dr-09071)
  - [보호그룹 스냅샷 삭제](#fc-dr-09081)
- [볼륨 복제](#볼륨-복제)
  - [볼륨 복제환경 구성](#fc-dr-04011)
  - [볼륨 복제환경 제거](#fc-dr-04021)
  - [볼륨 복제 시작](#fc-dr-04111)
  - [볼륨 복제 중지](#fc-dr-04121)
- [재해복구계획](#재해복구계획)
  - [재해복구계획 목록 조회](#fc-dr-03011)
  - [재해복구계획 조회](#fc-dr-03021)
  - [재해복구계획 등록](#fc-dr-03031)
  - [재해복구계획 수정](#fc-dr-03041)
  - [재해복구계획 삭제](#fc-dr-03051)
  - [재해복구계획 테넌트 동기화](#fc-dr-03111)
  - [재해복구계획 가용구역 동기화](#fc-dr-03121)
  - [재해복구계획 Hypervisor 동기화](#fc-dr-03191)
  - [재해복구계획 네트워크 동기화](#fc-dr-03131)
  - [재해복구계획 서브넷 동기화](#fc-dr-03201)
  - [재해복구계획 Floating IP 동기화](#fc-dr-03211)
  - [재해복구계획 라우터 동기화](#fc-dr-03221)
  - [재해복구계획 인스턴스 동기화](#fc-dr-03141)
  - [재해복구계획 볼륨타입 동기화](#fc-dr-03151)
  - [재해복구계획 스냅샷 조회](#fc-dr-03161)
  - [재해복구계획 스냅샷 생성](#fc-dr-03171)
  - [재해복구계획 스냅샷 삭제](#fc-dr-03181)
- [재해복구작업](#재해복구작업)
  - [재해복구작업 목록 조회](#fc-dr-05011)
  - [재해복구작업 조회](#fc-dr-05021)
  - [재해복구작업 생성](#fc-dr-05031)
  - [재해복구작업 수정](#fc-dr-05051)
  - [재해복구작업 삭제](#fc-dr-05061)
  - [재해복구작업 강제 삭제](#fc-dr-05062)
  - [재해복구작업 모니터링](#fc-dr-05111)
  - [재해복구작업 작업내역 모니터링](#fc-dr-05112)
  - [재해복구작업 인스턴스 모니터링](#fc-dr-05113)
  - [재해복구작업 볼륨 모니터링](#fc-dr-05114)
  - [재해복구작업 대기열 추가](#fc-dr-05121)
  - [재해복구작업 핸들링](#fc-dr-05122)
  - [재해복구작업 일시중지](#fc-dr-05131)
  - [재해복구작업 일시중지 시간 연장](#fc-dr-05132)
  - [재해복구작업 재개](#fc-dr-05141)
  - [재해복구작업 취소](#fc-dr-05151)
  - [재해복구작업 롤백 (모의훈련)](#fc-dr-05161)
  - [재해복구작업 롤백 (재해복구)](#fc-dr-05162)
  - [재해복구작업 롤백 대기시간 연장](#fc-dr-05171)
  - [재해복구작업 롤백 무시](#fc-dr-05181)
  - [재해복구작업 롤백 재시도](#fc-dr-05183)
  - [재해복구작업 확정](#fc-dr-05191)
  - [재해복구작업 확정 재시도](#fc-dr-05192)
  - [재해복구작업 확정 취소](#fc-dr-05193)
  - [재해복구작업 재시도 (재해복구)](#fc-dr-05201)
- [재해복구결과](#재해복구결과)
  - [보호그룹 history 조회](#fc-dr-09091)
  - [재해복구결과 보고서 목록 조회](#fc-dr-06011)
  - [재해복구결과 보고서 조회](#fc-dr-06021)
  - [재해복구결과 보고서 생성](#fc-dr-06031)
  - [재해복구결과 보고서 삭제 (모의훈련)](#fc-dr-06041)
- [보호현황 모니터링](#보호현황-모니터링)
  - [클러스터 보호현황 모니터링](#fc-dr-07011)
  - [재해복구계획 보호현황 모니터링](#fc-dr-07021)
  - [재해복구대상 인스턴스 보호현황 모니터링](#fc-dr-07031)
  - [재해복구대상 볼륨 보호현황 모니터링](#fc-dr-07041)
- [통계보고서](#통계보고서)
  - [통계보고서 목록 조회](#fc-dr-08011)
  - [통계보고서 조회](#fc-dr-08021)
  - [통계보고서 생성](#fc-dr-08031)
  - [통계보고서 삭제](#fc-dr-08041)
  - [통계보고서 생성 스케쥴 조회](#fc-dr-08111)
  - [통계보고서 생성 스케쥴 수정](#fc-dr-08121)
- [대시보드](#대시보드)
  - [클러스터 요약 정보 조회](#fc-dr-10011)
  - [보호 그룹 요약 정보 조회](#fc-dr-10021)
  - [인스턴스 요약 정보 조회](#fc-dr-10031)
  - [볼륨 요약 정보 조회](#fc-dr-10041)
  - [재해 복구 작업 요약 정보 조회](#fc-dr-10051)
  - [클러스터 관계 목록 조회](#fc-dr-10061)
- [인스턴스 템플릿](#인스턴스 템플릿)
  - [인스턴스 템플릿 목록조회](#fc-dr-09211)
  - [인스턴스 템플릿 조회](#fc-dr-09221)
  - [인스턴스 템플릿 생성](#fc-dr-09231)
  - [인스턴스 템플릿 삭제](#fc-dr-09241)
---

## 공통
### `FC-DR-00021`
**클러스터 삭제 가능 여부 확인**

[Cluster Manager](http://10.1.1.220/cdm/cdm-center/services/cluster-manager) 의 [클러스터 제거](http://10.1.1.220/cdm/cdm-center/documents/-/blob/master/functions.md#fc-cm-01061) 기능에서 호출되며, 해당 클러스터에 보호그룹이 있거나 보호그룹의 복구대상 클러스터로 설정되어있는지 여부를 확인한다.

<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

## 라이선스
### `FC-DR-01011`
**라이선스가 변경됨**

[라이선스가 변경](http://10.1.1.220/cdm/cdm-cloud/documents/-/blob/master/functions.md#fc-cl-01041)되면 CDM-Cloud 에 의해 호출되며,
다음과 같은 상황의 발생여부를 확인한다.

- `라이선스 만료임박`: 만료일 d-[30, 15, 7, 3, 2, 1]
- `라이선스 만료`: 만료일 d+[0, 7, 15, 30, 45]
- `서비스 만료임박`: 만료일 d+[60, 75, 83, 87, 88, 89]
- `서비스 만료`: 만료일 d+90 ~

<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-01021`
**라이선스 확인**

솔루션 기동시 혹은 매일 `0`시에 CDM-Cloud 를 통해 [라이선스의 상세정보를 조회](http://10.1.1.220/cdm/cdm-cloud/documents/-/blob/master/functions.md#fc-cl-01021)하고,
다음과 같은 상황의 발생여부를 확인한다.

- `라이선스 만료임박`: 만료일 d-[30, 15, 7, 3, 2, 1]
- `라이선스 만료`: 만료일 d+[0, 7, 15, 30, 45]
- `서비스 만료임박`: 만료일 d+[60, 75, 83, 87, 88, 89]
- `서비스 만료`: 만료일 d+90 ~

<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-01031`
**라이선스 제약사항 확인**

스토리지 매핑, 가용구역 매핑, 테넌트 복구대상 설정, 인스턴스 매핑, 볼륨 복제대상 설정 등 사용권 계약에 의해 제한될 수 있는 기능을 사용할 때 호출된다.
CDM-Cloud 를 통해 [라이선스의 상세정보를 조회](http://10.1.1.220/cdm/cdm-cloud/documents/-/blob/master/functions.md#fc-cl-01021)하고,
다음과 같은 제약사항을 확인한다.

- `cdm-dr-limits-platform`: 사용가능한 플랫폼 목록 (openstack, openshift, kubernetes, vmware, ...)
- `cdm-dr-limits-storage`: 사용가능한 스토리지 목록 (lvm, nfs, ceph, netapp, ...)
- `cdm-dr-limits-tenant`: 테넌트 갯수 제한
- `cdm-dr-limits-instance`: 인스턴스 갯수 제한
- `cdm-dr-limits-volume`: 볼륨 갯수 제한

<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

## 복구
### `FC-DR-02011`
**메타데이터 재조정**

메타데이터가 [복구](http://10.1.1.220/cdm/cdm-cloud/documents/-/blob/master/functions.md#fc-cl-03081)되면 CDM-Cloud 에 의해 호출된다.

복구된 메타데이터가 현재 클러스터의 상태와 다르다면 현재 상태에 맞게 재조정한다.

<sub>**라이선스 만료 후 가용여부**: `불가능`</sub>

---

## 보호그룹

### `FC-DR-09101`
**비보호 인스턴스 목록 조회**

사용자의 그룹이 Owner 인 클러스터의 비보호 인스턴스 목록을 조회한다.
`최고 관리자` 역할의 사용자는 모든 클러스터의 비보호 인스턴스 목록을 조회할 수 있다.

<sub>**사용권한**: `모든 사용자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-09011`
**보호그룹 목록 조회**

사용자의 그룹이 Owner 인 보호그룹 목록을 조회한다.
`최고 관리자` 역할의 사용자는 모든 보호그룹 목록을 조회할 수 있다.

<sub>**사용권한**: `모든 사용자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-09021`
**보호그룹 조회**

사용자의 그룹이 Owner 인 보호그룹의 상세정보를 조회한다.
`최고 관리자` 역할의 사용자는 모든 보호그룹의 상세정보를 조회할 수 있다.

<sub>**사용권한**: `모든 사용자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-09031`
**보호그룹 등록**

사용자의 그룹이 Owner 인 클러스터를 보호대상으로 보호그룹을 등록한다.
`최고 관리자` 역할의 사용자는 모든 클러스터를 대상으로 보호그룹을 등록할 수 있다.

`이름`, `설명`, `보호대상 클러스터`, `보호대상 인스턴스 목록`, `목표복구시점`, `목표복구시간`, `스냅샷 생성 주기` 를 입력하고 보호그룹을 등록한다. 다음과 같은 경우 보호그룹을 등록할 수 없다.
- 보호대상 클러스터가 라이선스에 명시된 사용가능한 클러스터 종류가 아닌 경우

보호그룹의 이름은 `한글`, `영어`, `숫자` 그리고 `특수 기호 중 -(하이픈), _(언더바), #(샵), .(점)` 만 포함할 수 있다.

보호대상 인스턴스 목록에는 보호대상 클러스터의 인스턴스만 추가할 수 있으며, 다른 보호그룹에 포함된 인스턴스는 보호대상으로 추가할 수 없다.
추가로, 동일한 볼륨을 공유하는 인스턴스들은 항상 같은 보호그룹에 속해야 한다.

스냅샷 생성 주기는 목표복구시점보다 클 수 없으며, `스냅샷 생성 주기`마다 [보호그룹의 스냅샷을 생성](#fc-dr-09071)된다.
단, 재해복구계획이 존재하지 않을 경우 보호그룹의 스냅샷을 생성하지 않는다.

<sub>**사용권한**: `최고 관리자`, `관리자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `불가능`</sub>

---

### `FC-DR-09041`
**보호그룹 수정**

사용자의 그룹이 Owner 인 보호그룹을 수정한다.
`최고 관리자` 역할의 사용자는 모든 보호그룹을 수정할 수 있다.

보호그룹의 `이름`, `설명`, `보호대상 인스턴스 목록`, `목표복구시점`, `목표복구시간`, `스냅샷 생성 주기`를 수정한다. 재해복구 작업이 존재하는 경우 보호그룹을 수정할 수 없다.

보호그룹의 이름은 `한글`, `영어`, `숫자` 그리고 `특수 기호 중 -(하이픈), _(언더바), #(샵), .(점)` 만 포함할 수 있다.

보호대상 인스턴스가 추가되면 다음과 같이 처리된다.
- 보호그룹의 모든 재해복구계획에 해당 인스턴스의 복구계획이 추가되고, `가용구역 변경 필요 여부` 플래그가 설정된다.
- 보호그룹의 모든 재해복구계획에 해당 인스턴스가 사용하는 볼륨의 복구계획이 추가된다.
- 보호그룹의 모든 재해복구계획에 해당 인스턴스가 사용하는 Floating IP 의 복구계획이 추가된다.
- 테넌트가 추가되었다면, 보호그룹의 모든 재해복구계획에 해당 테넌트의 복구계획이 추가되고, `미러링 테넌트 이름 변경 필요 여부` 플래그가 설정된다.
- 가용구역이 추가되었다면, 보호그룹의 모든 재해복구계획에 해당 가용구역의 복구계획이 추가되고, `가용구역 변경 필요 여부` 플래그가 설정된다. 만약 복구대상 클러스터에 가용구역이 하나만 존재한다면 `가용구역 변경 필요 여부` 플래그 설정없이 해당 가용구역이 복구대상 가용구역으로 설정된다. 
- 외부 네트워크가 추가되었다면, 보호그룹의 모든 재해복구계획에 해당 외부 네트워크 복구계획이 추가되고, `외부 네트워크 변경 필요 여부` 플래그가 설정된다. 만약 복구대상 클러스터에 외부 네트워크가 하나만 존재한다면 `외부 네트워크 변경 필요 여부` 플래그 설정없이 해당 외부 네트워크가 복구대상 외부 네트워크로 설정된다.
- 볼륨타입이 추가되었다면, 보호그룹의 모든 재해복구계획에 해당 볼륨타입의 복구계획이 추가되고, `볼륨타입 변경 필요 여부` 플래그를 설정한다.만약 복구대상 클러스터에 볼륨타입이 하나만 존재한다면 `볼륨타입 변경 필요 여부` 플래그 설정없이 해당 볼륨타입이 복구대상 볼륨타입으로 설정된다.
> 외부 네트워크란 해당 인스턴스가 사용하는 네트워크와 라우터로 연결된 외부 네트워크를 말한다.

보호대상 인스턴스가 제거되면 다음과 같이 처리된다.
- 보호그룹의 모든 재해복구계획에서 해당 인스턴스의 복구계획이 제거된다.
- 보호그룹의 모든 재해복구계획에서 해당 인스턴스가 사용하는 볼륨의 복구계획이 제거된다.
- 보호그룹의 모든 재해복구계획에서 사용하지 않는 테넌트 복구계획이 제거된다.
- 보호그룹의 모든 재해복구계획에서 사용하지 않는 가용구역 복구계획이 제거된다.
- 보호그룹의 모든 재해복구계획에서 사용하지 않는 외부 네트워크 복구계획이 제거된다.
- 보호그룹의 모든 재해복구계획에서 사용하지 않는 라우터 복구계획이 제거된다.
- 보호그룹의 모든 재해복구계획에서 사용하지 않는 볼륨타입 복구계획이 제거된다.
- 보호그룹의 모든 재해복구계획에서 사용하지 않는 FloatingIP 복구계획이 제거된다.
- 보호그룹의 모든 보호대상 인스턴스가 제거되면 해당 보호그룹에 대한 모든 재해복구계획이 제거된다.

추가로, `스냅샷 생성 주기` 를 변경하는 경우 스냅샷 생성 스케쥴이 변경된다.

<sub>**사용권한**: `최고 관리자`, `관리자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-09051`
**보호그룹 삭제**

사용자의 그룹이 Owner 인 보호그룹을 삭제한다.
`최고 관리자` 역할의 사용자는 모든 보호그룹을 삭제할 수 있다.

재해복구계획이 존재하는 보호그룹을 삭제할 수 없으며, 보호그룹의 모든 [스냅샷이 삭제](#fc-dr-09081)된다.

<sub>**사용권한**: `최고 관리자`, `관리자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-09061`
**보호그룹 스냅샷 목록 조회**

사용자의 그룹이 Owner 인 보호그룹의 스냅샷 목록을 조회한다.
`최고 관리자` 역할의 사용자는 모든 보호그룹의 스냅샷 목록을 조회할 수 있다.

<sub>**사용권한**: `최고 관리자`, `관리자`, `운영자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-09071`
**보호그룹 스냅샷 생성**

보호그룹의 스냅샷을 생성한다.

추가로 재해복구계획들의 [스냅샷을 생성](#fc-dr-03171)한다.

<sub>**사용권한**: `최고 관리자`, `관리자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-09081`
**보호그룹 스냅샷 삭제**

보호그룹의 스냅샷을 제거한다.

추가로 해당 시점의 재해복구계획 [스냅샷들을 제거](#fc-dr-03181)한다.

<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

## 볼륨 복제
### `FC-DR-04011`
**볼륨 복제환경 구성**

보호대상 클러스터의 볼륨타입과 복구대상 클러스터의 볼륨타입간 복제환경을 구성한다.

<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-04021`
**볼륨 복제환경 제거**

보호대상 클러스터의 볼륨타입과 복구대상 클러스터의 볼륨타입간 복제환경을 제거한다.

<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-04111`
**볼륨 복제 시작**

볼륨의 복제를 시작한다.

복구대상 스토리지로 볼륨과 스냅샷이 모두 실시간 복제되며, 스냅샷의 추가 및 삭제도 즉시 반영된다.

<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-04121`
**볼륨 복제 중지**

볼륨의 복제를 중지한다.

볼륨과 스냅샷의 실시간 복제가 중지되고, 복구대상 스토리지에서 볼륨 복제본 및 스냅샷 복제본이 제거된다.

<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

## 재해복구계획
### `FC-DR-03011`
**재해복구계획 목록 조회**

사용자의 그룹이 Owner 인 보호그룹의 재해복구계획 목록을 조회한다.
`최고 관리자` 역할의 사용자는 모든 보호그룹의 재해복구계획 목록을 조회할 수 있다.

<sub>**사용권한**: `모든 사용자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-03021`
**재해복구계획 조회**

사용자의 그룹이 Owner 인 보호그룹의 재해복구계획 상세정보를 조회한다.
`최고 관리자` 역할의 사용자는 모든 보호그룹의 재해복구계획 상세정보를 조회할 수 있다.

재해복구계획의 상태는 다음과 같다.

- 기본 재해복구계획 상태는 `normal` 이다.
- 재해복구계획의 원본 볼륨들이 미러링 상태가 아닌 경우(원본 볼륨들의 초기 복제 상태를 포함) 재해복구계획 상태는 `prepare` 이다.
- 복구대상 클러스터(recovery cluster) 의 `테넌트 이름 변경 필요` 플래그 설정(true)인 경우 재해복구계획 상태는 `warning` 이다.
- 복구대상 클러스터(recovery cluster) 의 `가용구역 변경 필요` 플래그 설정(true)인 경우 재해복구계획 상태는 `warning` 이다.
- 복구대상 클러스터(recovery cluster) 의 `외부 네트워크 변경 필요` 플래그 설정(true)인 경우 재해복구계획 상태는 `warning` 이다.
- 복구대상 클러스터(recovery cluster) 의 `스토리지 변경 필요` 플래그 설정(true)인 경우 재해복구계획 상태는 `warning` 이다.
- 복구대상 클러스터(recovery cluster) 의 `사용할 수 없음(Unavailable)` 플래그 설정(true)인 경우 재해복구계획 상태는 `warning` 이다.
- 복구대상 클러스터(recovery cluster) 의 상태가 `비활성화(Inactive)` 인 경우 재해복구계획 상태는 `critical` 이다.
- 보호대상 클러스터(protection cluster) 의 상태가 `비활성화(Inactive)` 인 경우 재해복구계획 상태는 `emergency` 이다.


<sub>**사용권한**: `모든 사용자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-03031`
**재해복구계획 등록**

사용자의 그룹이 Owner 인 보호그룹의 재해복구계획을 등록할 수 있다.
`최고 관리자` 역할의 사용자는 모든 보호그룹의 재해복구계획을 수정할 수 있다.

`이름`, `설명`, `복구대상 클러스터`, `상세복구계획`, `스냅샷 유지 갯수` 를 입력하고 재해복구계획을 등록한다.

복구대상 클러스터는 사용자의 그룹이 Owner 인 클러스터로만 설정할 수 있으며, 보호그룹에 Failback 을 위한 재해복구계획이 존재하는 경우 재해복구계획을 추가 등록할 수 없다.

재해복구계획의 이름은 `한글`, `영어`, `숫자` 그리고 `특수 기호 중 -(하이픈), _(언더바), #(샵), .(점)` 만 포함할 수 있다.

보호그룹의 보호대상 인스턴스가 사용하는 볼륨을 복제하기 위한 [볼륨타입간 복제환경이 구성](#fc-dr-04011)되고, [복제가 시작](#fc-dr-04111)된다.
`스냅샷 유지 갯수`가 초과되면 오래된 [보호그룹의 스냅샷을 삭제](#fc-dr-09081)된다.

> v1.0.0 에서는 보호대상 클러스터와 복구대상 클러스터의 종류, 보호대상 스토리지와 복구대상 스토리지의 종류가 같아야 한다.

> 최초로 재해복구계획 등록 시점에 [보호그룹의 스냅샷을 생성](#fc-dr-09071) 한다.

> 재해복구계획이 등록되고 최초의 보호그룹 스냅샷 생성 완료 시, `복구대상 클러스터의 스토리지 상태`는 **미러링 중인 원본 볼륨**과 **해당 볼륨의 스냅샷** 2개의 볼륨 이미지가 존재한다.

<sub>**사용권한**: `최고 관리자`, `관리자`</sub>
<sub>**라이선스 만료 후 가용여부**: `불가능`</sub>

---

### `FC-DR-03041`
**재해복구계획 수정**

사용자의 그룹이 Owner 인 보호그룹의 재해복구계획을 수정한다.
`최고 관리자` 역할의 사용자는 모든 보호그룹의 재해복구계획을 수정할 수 있다.

재해복구계획의 `이름`, `설명`, `복구대상 클러스터`, `상세복구계획`, `스냅샷 유지 갯수` 를 수정한다. 재해복구 작업이 존재하는 경우 재해복구계획을 수정할 수 없다.

재해복구계획의 이름은 `한글`, `영어`, `숫자` 그리고 `특수 기호 중 -(하이픈), _(언더바), #(샵), .(점)` 만 포함할 수 있다.

모의훈련이나 재해복구가 진행중인 재해복구계획은 수정할 수 없으며, Failback 을 위한 재해복구계획인 경우 `복구대상 클러스터`를 변경할 수 없다.

상세복구계획의 복구대상 스토리지가 변경되는 경우, 보호그룹의 보호대상 인스턴스가 사용하는 볼륨을 복제하기 위한 볼륨타입간 복제환경이 재구성([FC-DR-04011](#fc-dr-04011), [FC-DR-04021](#fc-dr-04021))되고, 볼륨의 복제가 재시작([FC-DR-04111](#fc-dr-04111), [FC-DR-04121](#fc-dr-04121))된다.

> v1.0.0 에서는 보호대상 클러스터와 복구대상 클러스터의 종류, 보호대상 스토리지와 복구대상 스토리지의 종류가 같아야 한다.

<sub>**사용권한**: `최고 관리자`, `관리자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-03051`
**재해복구계획 삭제**

사용자의 그룹이 Owner 인 보호그룹의 재해복구계획을 삭제한다.
`최고 관리자` 역할의 사용자는 모든 보호그룹의 재해복구계획을 삭제할 수 있다.

재해복구작업이 존재하는 재해복구계획은 삭제할 수 없으며,
보호그룹의 보호대상 인스턴스가 사용하는 볼륨을 복제하기 위한 [볼륨타입간 복제환경이 제거](#fc-dr-04021)되고,
볼륨의 [복제가 중지](#fc-dr-04121)된다.

> 재해복구계획이 삭제 시, `복구대상 클러스터의 스토리지 상태`는 **미러링 중인 원본 볼륨**과 **해당 볼륨의 스냅샷 전체** 가 삭제된다.

<sub>**사용권한**: `최고 관리자`, `관리자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-03111`
**재해복구계획 테넌트 동기화**

재해복구계획 [클러스터의 테넌트 동기화](http://10.1.1.220/cdm/cdm-center/documents/-/blob/master/functions.md#fc-cm-01331)를 통해 다음과 같은 이벤트를 감지하고, 처리한다.

- **복구대상 클러스터에 테넌트 추가**
  - 미러링하도록 설정되고, 미러링 테넌트명이 중복되는 테넌트 복구계획에 `미러링 테넌트 이름을 변경 필요` 플래그 설정

- **복구대상 클러스터 테넌트의 테넌트 이름 변경**
  - 미러링하도록 설정되고, 미러링 테넌트명이 중복되는 테넌트 복구계획에 `미러링 테넌트 이름을 변경 필요` 플래그 설정
  - `미러링 테넌트 이름을 변경 필요` 플래그 설정된 테넌트 복구계획의 미러링 테넌트 이름 중복여부 재확인

- **복구대상 클러스터에서 테넌트 제거**
  - `미러링 테넌트 이름을 변경 필요` 플래그 설정된 테넌트 복구계획의 미러링 테넌트 이름 중복여부 재확인

<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-03121`
**재해복구계획 가용구역 동기화**

재해복구계획 [클러스터의 가용구역 동기화](http://10.1.1.220/cdm/cdm-center/documents/-/blob/master/functions.md#fc-cm-01231)를 통해 다음과 같은 이벤트를 감지하고, 처리한다.

- **복구대상 클러스터에서 가용구역 제거**
  - 제거된 가용구역의 복구계획에 `가용구역 변경 필요` 플래그 설정
  - 제거된 가용구역에 미러링하도록 설정된 인스턴스의 복구계획에 `가용구역 변경 필요` 플래그 설정 및 `Hypervisor id` 초기화
  - 제거된 가용구역의 컴퓨트 노드에 미러링하도록 설정된 인스턴스 복구계획에 `가용구역 변경 필요` 플래그 설정 및 `Hypervisor id` 초기화

<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-03131`
**재해복구계획 네트워크 동기화**

재해복구계획 [클러스터의 네트워크 동기화](http://10.1.1.220/cdm/cdm-center/documents/-/blob/master/functions.md#fc-cm-01441)를 통해 다음과 같은 이벤트를 감지하고, 처리한다.

- **복구대상 클러스터 외부 네트워크의 external 플래그 설정**
  - 변경된 네트워크에 매핑하도록 설정된 외부 네트워크 복구계획에 `외부 네트워크 변경 필요` 플래그 해제
  - 변경된 네트워크에 라우팅하도록 설정된 라우터 복구계획에 `외부 네트워크 변경 필요` 플래그 해제

- **복구대상 클러스터 외부 네트워크의 external 플래그 해제**
  - 변경된 네트워크에 매핑하도록 설정된 외부 네트워크 복구계획에 `외부 네트워크 변경 필요` 플래그 설정
  - 변경된 네트워크에 라우팅하도록 설정된 라우터 복구계획에 `외부 네트워크 변경 필요` 플래그 설정

- **복구대상 클러스터 외부 네트워크 삭제**
  - 삭제된 네트워크에 매핑하도록 설정된 외부 네트워크 복구계획에 복구대상 외부네트워크 id 초기화 및 `외부 네트워크 변경 필요` 플래그 설정
  - 삭제된 네트워크에 라우팅하도록 설정된 라우터 복구계획에 복구대상 외부네트워크 id 초기화 및 `외부 네트워크 변경 필요` 플래그 설정

<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-03141`
**재해복구계획 인스턴스 동기화**

재해복구계획 [클러스터의 인스턴스 동기화](http://10.1.1.220/cdm/cdm-center/documents/-/blob/master/functions.md#fc-cm-01531)를 통해 다음과 같은 이벤트를 감지하고, 처리한다.

- **복구대상 클러스터 컴퓨트 노드에 인스턴스 추가 배치**
  - 감소한 유휴 리소스가 해당 컴퓨트 노드에 미러링하도록 설정된 인스턴스의 필요 리소스를 충족하지 못하면, 가용구역내 유휴 리소스가 충분한 컴퓨트 노드에 미러링하도록 설정 변경. 유휴 리소스가 충분한 컴퓨트 노드가 없다면 인스턴스의 복구계획에 `가용구역 변경 필요` 플래그 설정

- **복구대상 클러스터 컴퓨트 노드의 인스턴스가 필요로하는 리소스 증가**
  - 감소한 유휴 리소스가 해당 컴퓨트 노드에 미러링하도록 설정된 인스턴스의 필요 리소스를 충족하지 못하면, 가용구역내 유휴 리소스가 충분한 컴퓨트 노드에 미러링하도록 설정 변경. 유휴 리소스가 충분한 컴퓨트 노드가 없다면 인스턴스의 복구계획에 `가용구역 변경 필요` 플래그 설정

- **복구대상 클러스터 컴퓨트 노드에서 인스턴스 제거**
  - 유휴 리소스가 증가한 컴퓨트 노드가 속한 가용구역에 미러링하도록 설정되고, 복구계획에 `가용구역 변경 필요` 플래그 설정된 인스턴스를 미러링할 유휴 리소스가 충분한 컴퓨트 노드 재탐색

- **보호대상 클러스터 컴퓨트 노드에서 인스턴스 제거**
  - 보호대상 클러스터 인스턴스가 삭제됐을 때 인스턴스 복구 계획 삭제, 보호그룹에서 제거, 복구계획에 `가용구역 변경 필요` 플래그 설정된 인스턴스 복구 계획 재검토

- **복구대상 클러스터 컴퓨트 노드의 인스턴스가 필요로하는 리소스 감소**
  - 유휴 리소스가 증가한 컴퓨트 노드가 속한 가용구역에 미러링하도록 설정되고, 복구계획에 `가용구역 변경 필요` 플래그 설정된 인스턴스를 미러링할 유휴 리소스가 충분한 컴퓨트 노드 재탐색

- **보호대상 클러스터의 복구대상 인스턴스가 필요로하는 리소스 증가**
  - 해당 인스턴스를 복구할 컴퓨트 노드의 유휴 리소스가 필요 리소스를 충족하지 못하면 가용구역내 유휴 리소스가 충분한 컴퓨트 노드에 복구하도록 설정 변경. 유휴 리소스가 충분한 컴퓨트 노드가 없다면 `가용구역 변경 필요` 플래그 설정

- **보호대상 클러스터의 복구대상 인스턴스가 필요로하는 리소스 감소**
  - 유휴 리소스가 증가한 컴퓨트 노드가 속한 가용구역에 미러링하도록 설정되고, 복구계획에 `가용구역 변경 필요` 플래그 설정된 인스턴스를 미러링할 유휴 리소스가 충분한 컴퓨트 노드 재탐색

- **보호대상 클러스터 인스턴스에 네트워크 추가**
  - 외부 네트워크로 라우팅되는 네트워크인 경우, 외부 네트워크 복구계획을 추가하고 `외부 네트워크 변경 필요` 플래그 설정

- **복구대상 클러스터에 FloatingIP 추가**
  - 추가된 FloatingIP 의 IP 주소가 보호대상 인스턴스가 사용하는 FloatingIP 의 IP 주소와 같은 경우, 해당 FloatingIP 에 `복구 불가` 플래그 설정

- **복구대상 클러스터의 FloatingIP 제거**
  - 제거된 FloatingIP 의 IP 주소가 보호대상 인스턴스가 사용하는 FloatingIP 의 IP 주소와 같은 경우, 해당 FloatingIP 에 `복구 불가` 플래그 해제

- **보호대상 클러스터 인스턴스에 FloatingIP 추가**
  - 추가된 FloatingIP 의 IP 주소가 복구대상 클러스터에 이미 존재하는 경우, 해당 FloatingIP 에 `복구 불가` 플래그 설정

- **보호대상 클러스터 인스턴스의 FloatingIP 변경**
  - 변경된 FloatingIP 의 IP 주소가 복구대상 클러스터에 이미 존재하는 경우, 해당 FloatingIP 에 `복구 불가` 플래그 설정
  - 변경된 FloatingIP 의 IP 주소가 복구대상 클러스터에 이미 존재하지 않는 경우, 해당 FloatingIP 에 `복구 불가` 플래그 해제

- **보호대상 클러스터 인스턴스가 사용하는 볼륨 추가**
  - 볼륨타입에 대한 복구계획이 없다면 `볼륨타입 변경 필요` 플래그를 설정하여 볼륨타입 복구계획을 추가하고, 지원하지 않는 볼륨타입인 경우 `복구 불가` 플래그도 설정
  - 새로운 볼륨 복구 계획을 추가하고 초기 복제 과정이 필요하기 때문에 `복구 불가` 플래그를 설정하고 *지원하지 않는 볼륨 타입*이거나 *볼륨타입 복구계획의 볼륨타입 변경 필요 플래그가 설정*되어 있는 경우에도 `복구 불가` 플래그를 설정
  - 복제대상 볼륨을 복제하기 위한 [볼륨타입간 복제환경을 구성](#fc-dr-04011)하고 [복제를 시작](#fc-dr-04111)해야 한다. 이미 복제환경이 구성되어있는 경우, 해당 복제환경을 사용하여 볼륨을 복제한다.

- **보호대상 클러스터 인스턴스가 사용하는 볼륨 제거**
  - 볼륨 복구계획을 제거하고, 볼륨의 [복제를 중지](#fc-dr-04121)하고, 복제를 위해 구성한 [볼륨타입간 복제환경을 제거](#fc-dr-04011)한다. 만약 해당 복제환경을 통해 복제중인 볼륨이 존재한다면 복제환경을 제거하지 않는다. 
  - 볼륨타입 복구계획이 더 이상 필요없으면 제거

- **보호대상 클러스터 인스턴스를 다른 Hypervisor 로 마이그레이션**
  - 볼륨의 [복제를 중지](#fc-dr-04121)하고, [복제를 다시 시작](#fc-dr-04111)

- **보호 대상 클러스터 인스턴스에서 네트워크 제거**
  - 네트워크가 연결된 라우터 복구 계획 삭제, 더 이상 라우터 복구계획이 필요 없다면 라우터 복구계획 제거
  - 외부 네트워크로 라우팅된 네트워크이고, 더 이상 외부 네트워크 복구계획이 필요 없다면 외부 네트워크 복구계획 제거

<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-03151`
**재해복구계획 볼륨타입 동기화**

재해복구계획 [클러스터의 볼륨타입 동기화](http://10.1.1.220/cdm/cdm-center/documents/-/blob/master/functions.md#fc-cm-01731)를 통해 다음과 같은 이벤트를 감지하고, 처리한다.

- **복구대상 클러스터 볼륨타입의 변경**
  - 해당 볼륨타입에 복제하도록 설정된 스토리지 복구계획의 `사용불가` 플래그 설정한다.
  - 해당 스토리지에 복제하도록 설정된 볼륨 복구계획의 `사용불가` 플래그 설정한다.
  - 해당 볼륨타입으로 복제하기 위해 구성한 [복제환경을 제거](#fc-dr-04011)한다.

- **복구대상 클러스터 볼륨타입의 제거**
  - 해당 볼륨타입에 복제하도록 설정된 스토리지 복구계획의 `스토리지 변경 필요` 플래그 설정한다.
  - 해당 스토리지에 복제하도록 설정된 볼륨 복구계획의 `사용불가` 플래그를 설정하고, `스토리지 변경 필요` 플래그를 설정한다.
  - 추가로 해당 볼륨타입으로 복제하기 위해 구성한 [복제환경을 제거](#fc-dr-04011)한다.

<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-03161`
**재해복구계획 스냅샷 조회**

해당 스냅샷 시점의 재해복구계획 상세내용을 조회한다.

<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-03171`
**재해복구계획 스냅샷 생성**

재해복구계획의 스냅샷을 생성한다.

<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-03181`
**재해복구계획 스냅샷 삭제**

재해복구계획의 특정 스냅샷을 제거한다.

<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-03191`
**재해복구계획 Hypervisor 동기화**

재해복구계획 [클러스터 Hypervisor 동기화](http://10.1.1.220/cdm/cdm-center/documents/-/blob/master/functions.md#fc-cm-01141)를 통해 다음과 같은 이벤트를 감지하고, 처리한다.

- **복구대상 클러스터 가용구역에 컴퓨트 노드 추가** 
  - 추가된 컴퓨트 노드의 가용구역으로 복구될 보호 대상 인스턴스의 복구 hypervisor 재할당. 유휴 리소스가 부족하여 할당되지 못한 인스턴스 복구계획에 `가용구역 변경 필요` 플래그 설정 및 hypervisor_id 초기화

- **복구대상 클러스터 컴퓨트 노드의 리소스 증가**
  - 수정된 컴퓨트 노드의 가용구역으로 복구될 보호 대상 인스턴스의 복구 hypervisor 재할당. 유휴 리소스가 부족하여 할당되지 못한 인스턴스 복구계획에 `가용구역 변경 필요` 플래그 설정 및 hypervisor_id 초기화

- **복구대상 클러스터 컴퓨트 노드의 리소스 감소**
  - 수정된 컴퓨트 노드의 가용구역으로 복구될 보호 대상 인스턴스의 복구 hypervisor 재할당. 유휴 리소스가 부족하여 할당되지 못한 인스턴스 복구계획에 `가용구역 변경 필요` 플래그 설정 및 hypervisor_id 초기화

- **복구대상 클러스터 가용구역에서 컴퓨트 노드 제거**
  - 제거된 컴퓨트 노드의 가용구역으로 복구될 보호 대상 인스턴스의 복구 hypervisor 재할당. 유휴 리소스가 부족하여 할당되지 못한 인스턴스 복구계획에 `가용구역 변경 필요` 플래그 설정 및 hypervisor_id 초기화

<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-03201`
**재해복구계획 서브넷 동기화**

재해복구계획 [클러스터 서브넷 동기화](http://10.1.1.220/cdm/cdm-center/documents/-/blob/master/functions.md#fc-cm-01471)를 통해 다음과 같은 이벤트를 감지하고, 처리한다.

- **복구대상 클러스터 외부 네트워크 서브넷의 제거**
  - 제거된 네트워크 서브넷에 라우팅하도록 설정된 라우터 복구계획에서 제거된 네트워크 서브넷과 연결하도록 설정된 라우팅 인터페이스 제거
  
- **보호대상 클러스터 서브넷의 제거**
  - 제거된 서브넷에 라우팅하도록 설정된 외부 네트워크의 복구계획이 더이상 필요 없다면 외부 네트워크 복구계획 제거
  - 제거된 서브넷에 라우팅하도록 설정된 라우팅 인터페이스 복구계획이 더이상 필요 없다면 라우팅 복구계획 제거
  - 제거된 서브넷에 라우팅하도록 설정된 라우터 복구계획이 더이상 필요 없다면 라우터 복구계획 제거

<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-03211`
**재해복구계획 Floating IP 동기화**

재해복구계획 [클러스터의 Floating IP 동기화](http://10.1.1.220/cdm/cdm-center/documents/-/blob/master/functions.md#fc-cm-01481)를 통해 다음과 같은 이벤트를 감지하고, 처리한다.

- **복구대상 클러스터 Floating IP 추가**
  - 추가된 Floating IP의 IP 주소가 Floating IP 복구계획에 등록된 Floating IP의 IP 주소와 같은 경우, Floating IP 복구계획에 `사용 불가` 플래그 설정

- **복구대상 클러스터 Floating IP 변경**
  - 변경전 Floating IP의 IP 주소가 Floating IP 복구계획에 등록된 Floating IP의 IP 주소와 같으면서 해당 복구계획의 `사용 불가` 플래그가 설정되어 있다면 `사용 불가` 플래그 해제
  - 변경후 Floating IP의 IP 주소가 Floating IP 복구계획에 등록된 Floating IP의 IP 주소와 같은 경우, Floating IP 복구계획에 `사용 불가` 플래그 설정

- **복구대상 클러스터 Floating IP 삭제**
  - 삭제된 Floating IP의 IP 주소가 Floating IP 복구계획에 등록된 Floating IP의 IP 주소와 같으면서 해당 복구계획의 `사용 불가` 플래그가 설정되어 있다면 `사용 불가` 플래그 해제

<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-03221`
**재해복구계획 라우터 동기화**

재해복구계획 [클러스터의 라우터 동기화](http://10.1.1.220/cdm/cdm-center/documents/-/blob/master/functions.md#fc-cm-01491)를 통해 다음과 같은 이벤트를 감지하고, 처리한다.

- **보호대상 클러스터 라우터 추가**
  - 추가된 라우터와 연결된 외부 네트워크에 대한 복구계획이 없다면 외부 네트워크 복구계획을 추가하고 `외부 네트워크 변경 필요 여부` 플래그 설정

- **보호대상 인스턴스의 네트워크에 연결된 라우터에 라우팅 인터페이스 추가**
  - 추가된 라우팅 인터페이스에 연결된 외부 네트워크에 대한 복구계획이 없다면 외부 네트워크 복구계획 추가을 추가하고 `외부 네트워크 변경 필요 여부` 플래그 설정

- **보호대상 인스턴스의 네트워크에 연결된 라우터에 라우팅 인터페이스 삭제**
  - 삭제된 라우팅 인터페이스에 연결된 외부 네트워크에 대한 복구계획이 필요 없어지면 외부 네트워크 복구계획 삭제
  - 삭제된 라우팅 인터페이스의 라우터에 대한 복구계획이 필요 없어지면 라우터 복구계획과 라우팅 인터페이스 복구계획 삭제

- **보호대상 클러스터 라우터 삭제**
  - 삭제된 라우터에 대한 복구계획이 있다면 복구계획 삭제
  - 삭제된 라우터의 외부 네트워크에 대한 복구계획이 필요 없어지면 외부 네트워크 복구계획 삭제

<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

## 재해복구작업
### `FC-DR-05011`
**재해복구작업 목록 조회**

사용자의 그룹이 Owner 인 보호그룹의 재해복구작업 목록을 조회한다.
`최고 관리자` 역할의 사용자는 모든 보호그룹의 재해복구작업 목록을 조회할 수 있다.

<sub>**사용권한**: `모든 사용자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-05021`
**재해복구작업 조회**

사용자의 그룹이 Owner 인 보호그룹의 재해복구작업 상세정보를 조회한다.
`최고 관리자` 역할의 사용자는 모든 보호그룹의 재해복구작업 상세정보를 조회할 수 있다.

<sub>**사용권한**: `모든 사용자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-05031`
**재해복구작업 생성**

사용자의 그룹이 Owner 인 보호그룹의 재해복구작업을 생성한다.
`최고 관리자` 역할의 사용자는 모든 보호그룹의 재해복구작업을 생성할 수 있다.

`재해복구계획`, `복구 유형`, `데이터 시점 유형` 을 입력하고 재해복구작업을 생성할 수 있으며, 재해복구계획은 해당 보호그룹의 재해복구계획으로만 설정할 수 있다.

복구 유형은 '모의훈련' 이나 '재해복구' 로 설정할 수 있으며, 설정할 수 있는 데이터 시점 유형은 다음과 같다.
- **최신 데이터**
- **최신 스냅샷**
- \[즉시실행인 경우] **특정 스냅샷**: `복구할 스냅샷`을 추가로 설정해야 한다.

재해복구작업은 즉시실행하거나 특정일시로 실행을 예약할 수 있으며, 모의훈련 유형의 작업인 경우 스케쥴을 설정할 수 있다.
만약 해당 보호그룹의 재해복구가 진행중이거나 특정일시로 예약되어있다면 재해복구작업을 생성할 수 없다.

모의훈련은 동일한 시간으로 작업을 생성할 수 없어야한다. 또한, 스케줄 종류가 다르거나 다른 주기의 스케줄에의해 실행 충돌 가능성이 있는 경우 미리 알려줘야한다. 

즉시실행하거나 특정일시로 실행을 예약할 때, **모의훈련 혹은 재해복구가 불가능한 인스턴스**가 존재한다면 `force` 옵션을 설정해야 재해복구작업을 생성할 수 있다.
> 복구대상 클러스터에 생성(+매핑)할 수 없는 리소스를 의존하는 인스턴스와 그 인스턴스의 후행 인스턴스들은 모의훈련 혹은 재해복구가 불가능하다.

즉시실행인 경우 재해복구작업이 [대기열에 추가](#fc-dr-05121)된다.

재해복구계획 상태가 `prepare`, `warning`, `critical` 인 경우 재해복구작업을 생성할 수 없다.

<sub>**사용권한**: `최고 관리자`, `관리자`, `운영자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-05051`
**재해복구작업 수정**

사용자의 그룹이 Owner 인 보호그룹의 재해복구작업을 수정한다.
`최고 관리자` 역할의 사용자는 모든 보호그룹의 재해복구작업을 수정할 수 있다.

실행중이거나 실행대기(pending) 상태의 재해복구작업은 수정할 수 없으며,
특정일시로 예약된 작업의 경우 실행 예정일 시 스케쥴이 설정된 작업의 경우 실행 주기를 수정할 수 있다.

<sub>**사용권한**: `최고 관리자`, `관리자`, `운영자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-05061`
**재해복구작업 삭제**

사용자의 그룹이 Owner 인 보호그룹의 재해복구작업을 삭제한다.
`최고 관리자` 역할의 사용자는 모든 보호그룹의 재해복구작업을 삭제할 수 있다.

실행중인 재해복구작업은 삭제할 수 없다.

<sub>**사용권한**: `최고 관리자`, `관리자`, `운영자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>
---

### `FC-DR-05062`
**재해복구작업 강제 삭제**

사용자의 그룹이 Owner 인 보호그룹의 재해복구작업을 클러스터 상태 및 전제조건과 상관없이 강제로 삭제한다.
`최고 관리자` 역할의 사용자는 모든 보호그룹의 재해복구작업을 삭제할 수 있다.

<sub>**사용권한**: `최고 관리자`, `관리자`, `운영자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-05111`
**재해복구작업 모니터링**

사용자의 그룹이 Owner 인 보호그룹의 재해복구작업 상태와 진행상황을 실시간으로 모니터링한다.
`최고 관리자` 역할의 사용자는 모든 보호그룹의 재해복구작업 상태와 진행상황을 실시간으로 모니터링할 수 있다.

<sub>**사용권한**: `모든 사용자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-05112`
**재해복구작업 작업내역 모니터링**

사용자의 그룹이 Owner 인 보호그룹의 재해복구작업 작업내역을 실시간으로 모니터링한다.
`최고 관리자` 역할의 사용자는 모든 보호그룹의 재해복구작업 작업내역을 실시간으로 모니터링할 수 있다.

<sub>**사용권한**: `모든 사용자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-05113`
**재해복구작업 인스턴스 모니터링**

사용자의 그룹이 Owner 인 보호그룹의 재해복구작업 인스턴스 복구상태를 실시간으로 모니터링한다.
`최고 관리자` 역할의 사용자는 모든 보호그룹의 재해복구작업 인스턴스 복구상태를 실시간으로 모니터링할 수 있다.
최초 요청 시 재해복구작업의 전체 인스턴스들의 복구상태를 넘겨주고, 이후에는 상태가 변경된 인스턴스들의 복구 상태를 넘겨준다.

<sub>**사용권한**: `모든 사용자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-05114`
**재해복구작업 볼륨 모니터링**

사용자의 그룹이 Owner 인 보호그룹의 재해복구작업 볼륨 복구상태를 실시간으로 모니터링한다.
`최고 관리자` 역할의 사용자는 모든 보호그룹의 재해복구작업 볼륨 복구상태를 실시간으로 모니터링할 수 있다.
최초 요청 시 재해복구작업의 전체 볼륨들의 복구상태를 넘겨주고, 이후에는 상태가 변경된 볼륨들의 복구 상태를 넘겨준다.

<sub>**사용권한**: `모든 사용자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-05121`
**재해복구작업 대기열 추가**

즉시실행, 특정일시 예약 혹은 스케쥴에 의한 재해복구작업을 대기열에 추가한다.

대기열에 추가된 작업은 실행대기(waiting) 상태가 된다.

> 대기열에 추가되고나면 클러스터나 보호그룹, 재해복구계획 등이 변경되더라도 작업에 영향이 없어야 하며, [Migrator Daemon](http://10.1.1.220/cdm/cdm-disaster-recovery/daemons/migrator) 이 순차적 혹흔 병렬로 작업을 수행한다.

<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-05122`
**재해복구작업 핸들링**

재해복구작업의 **state** 와 **operation** 에 따라 작업을 핸들링한다.
- **state** 가 `waiting` 이고, **operation** 이 `run` 인 재해복구작업들 중 동일한 보호그룹에 대해 실행중인 재해복구작업이 없고, 대기열에 제일 먼저 추가된 작업의 task 를 build 하고 **state** 를 `pending` 으로 변경
- **state** 가 `pending` 이고, **operation** 이 `run` 인 재해복구작업들 중 동일한 보호그룹에 대해 실행중인 재해복구작업이 없고, 대기열에 제일 먼저 추가된 작업의 **state** 를 `running` 으로 변경
- **state** 가 `paused` 이고, **operation** 이 `run` 인 재해복구작업의 **state** 를 `running` 으로 변경
- **state** 가 `paused` 이고, **operation** 이 `cancel` 인 재해복구작업의 **state** 를 `canceling` 으로 변경
- **state** 가 `paused` 이고, pause timeout 이 발생한 재해복구작업의 **state** 를 `running` 으로 변경
- **state** 가 `running` 이고, **operation** 이 `pause` 인 재해복구작업의 **state** 를 `paused` 로 변경
- **state** 가 `running` 이고, **operation** 이 `cancel` 인 재해복구작업의 **state** 를 `canceling` 으로 변경
- **state** 가 `running` 인 재해복구작업들 중 모든 **Task** 가 완료된 작업의 **state** 를 `completed` 로 변경하고, **result code** 를 `success`, `partial_success`, `failed` 중 하나로 입력
- **state** 가 `canceling` 인 재해복구작업들 중 모든 **Task** 가 완료된 작업의 **state** 를 `completed` 로 변경하고, **result code** 를 `canceled` 로 입력
- **state** 가 `completed` 이고, **operation** 이 `retry` 인 재해복구작업의 **state** 를 `running` 으로 변경하고, **operation** 을 `run` 으로 변경 (부분 재시도)
- **state** 가 `completed` 이고, **operation** 이 `rollback` 인 재해복구작업의 **state** 를 `clearing` 으로 변경
- **state** 가 `completed` 이고, **operation** 이 `confirm` 인 재해복구작업의 **state** 를 `clearing` 으로 변경
- **state** 가 `completed` 이고, rollback timeout 이 발생한 재해복구작업의 **state** 를 `clearing` 으로 변경
- **state** 가 `clearing` 인 재해복구작업들 중 모든 **Clear Task** 가 완료된 작업의 **state** 를 `clear-failed`, `reporting` 중 하나로 변경
- **state** 가 `clear-failed` 이고, **operation** 이 `retry-rollback` 인 재해복구작업의 **state** 를 `clearing` 으로 변경하고, **operation** 을 `rollback` 으로 변경 (롤백 재시도))
- **state** 가 `clear-failed` 이고, **operation** 이 `ignore-rollback` 인 재해복구작업의 **state** 를 `reporting` 으로 변경
- **state** 가 `clear-failed` 이고, **operation** 이 `retry-confirm` 인 재해복구작업의 **state** 를 `clearing` 으로 변경하고, **operation** 을 `confirm` 으로 변경 (확정 재시도))
- **state** 가 `clear-failed` 이고, **operation** 이 `cancel-confirm` 인 재해복구작업의 **state** 를 `clearing` 으로 변경하고, **operation** 을 `rollback` 으로 변경 (확정 취소))
- **state** 가 `clear-failed` 이고, rollback timeout 이 발생한 모의훈련 재해복구작업의 **state** 를 `clearing` 으로 변경
- **state** 가 `reporting` 인 재해복구작업의 [재해복구결과 보고서를 생성](#fc-dr-06031)하고, **state** 를 `finished` 로 변경
- **state** 가 `finished` 인 [재해복구작업을 삭제](fc-dr-05061)하고, 해당 재해복구작업의 [재해복구계획을 삭제](fc-dr-03051) 하고, 해당 재해복구작업의 [보호그룹을 삭제](fc-dr-09051) 한다.

**state** 의 종류는 다음과 같다.
- `dr.recovery.job.state.waiting`: 작업이 트리거되지 않음
- `dr.recovery.job.state.pending`: 작업이 트리거되었으나 아직 시작하지 않음
- `dr.recovery.job.state.running`: 작업을 진행중
- `dr.recovery.job.state.canceling`: 작업을 취소중
- `dr.recovery.job.state.paused`: 작업을 일시중지함
- `dr.recovery.job.state.completed`: 작업을 완료함
- `dr.recovery.job.state.clearing`: 작업 결과를 정리중
- `dr.recovery.job.state.clear-failed`: 작업 결과 정리에 실패함
- `dr.recovery.job.state.reporting`: 작업의 결과보고서 생성중
- `dr.recovery.job.state.finished`: 작업을 종료함

**operation** 의 종류는 다음과 같다.
- `run`: 재해복구작업을 진행해라
- `pause`: 재해복구작업을 일시중지해라
- `cancel`: 재해복구작업을 취소해라
- `retry`: 일부 인스턴스의 재해복구를 재시도해라
- `rollback`: 재해복구작업 시작 전으로 롤백해라
- `retry-rollback`: 실패한 롤백을 재시도해라
- `ignore-rollback`: 실패한 롤백을 무시해라
- `confirm`: 재해복구를 확정해라
- `retry-confirm`: 실패한 재해복구 확정을 재시도해라
- `cancel-confirm`: 실패한 재해복구 확정을 취소하고 재해복구작업 시작 전으로 롤백해라

**result code** 의 종류는 다음과 같다.
- `dr.recovery.result.success`: 성공
- `dr.recovery.result.partial_success`: 부분성공
- `dr.recovery.result.failed`: 실패
- `dr.recovery.result.canceled`: 취소

> 재해복구작업의 **state** 가 `completed` 이며 볼륨 복구에 성공한 경우, `복구대상 클러스터의 스토리지 상태`는 
데이터 복구 시점 유형이 **최신 데이터** 인 경우, **복구 볼륨**, **복구 볼륨 스냅샷(롤백용)**, **해당 볼륨의 스냅샷 전체** 가 존재하며,
데이터 복구 시점 유형이 **최신 혹은 특정 스냅샷** 인 경우, **원본 볼륨**, **복구 볼륨**, **복구 볼륨 스냅샷(롤백용)**, **복구 시점 스냅샷을 제외한 해당 볼륨의 스냅샷 전체** 가 존재한다.

<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-05131`
**재해복구작업 일시중지**

사용자의 그룹이 Owner 인 보호그룹의 재해복구작업을 `60분`동안 일시중지한다.
`최고 관리자` 역할의 사용자는 보호그룹의 재해복구작업을 일시중지할 수 있다.

실행중(running) 인 재해복구작업만 일시중지할 수 있다.

<sub>**사용권한**: `최고 관리자`, `관리자`, `운영자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-05132`
**재해복구작업 일시중지 시간 연장**

사용자의 그룹이 Owner 인 보호그룹 재해복구작업의 일시중지 시간을 연장한다.
`최고 관리자` 역할의 사용자는 보호그룹 재해복구작업의 일시중지 시간을 연장할 수 있다.

일시중지(paused) 상태인 재해복구작업만 일시중지 시간을 연장할 수 있다.

사용자는 연장할 시간을 분단위(`30`-`180`)로 지정해야 하며, 기본값은 `60분`이다.

<sub>**사용권한**: `최고 관리자`, `관리자`, `운영자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-05141`
**재해복구작업 재개**

사용자의 그룹이 Owner 인 보호그룹의 재해복구작업을 재개한다.
`최고 관리자` 역할의 사용자는 보호그룹의 재해복구작업을 재개할 수 있다.

일시중지(paused) 상태인 재해복구작업만 재개할 수 있다.

<sub>**사용권한**: `최고 관리자`, `관리자`, `운영자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-05151`
**재해복구작업 취소**

사용자의 그룹이 Owner 인 보호그룹의 재해복구작업을 취소한다.
`최고 관리자` 역할의 사용자는 보호그룹의 재해복구작업을 취소할 수 있다.

실행중(running) 이거나 일시중지(paused) 상태인 재해복구작업만 취소할 수 있다.

재해복구작업의 **operation** 을 `cancel` 로 변경한다.

<sub>**사용권한**: `최고 관리자`, `관리자`, `운영자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-05161`
**재해복구작업 롤백 (모의훈련)**

사용자의 그룹이 Owner 인 보호그룹의 재해복구작업을 롤백한다.
`최고 관리자` 역할의 사용자는 보호그룹의 재해복구작업을 롤백할 수 있다.

완료(completed) 상태인 모의훈련 유형의 재해복구작업만 롤백할 수 있으며,
복구대상 클러스터가 재해복구작업을 시작하기 전 상태로 롤백된다.

<sub>**사용권한**: `최고 관리자`, `관리자`, `운영자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-05162`
**재해복구작업 롤백 (재해복구)**

사용자의 그룹이 Owner 인 보호그룹의 재해복구작업을 롤백한다.
`최고 관리자` 역할의 사용자는 보호그룹의 재해복구작업을 롤백할 수 있다.

완료(completed) 상태인 재해복구 유형의 재해복구작업만 롤백할 수 있으며,
복구대상 클러스터가 재해복구작업을 시작하기 전 상태로 롤백된다.

<sub>**사용권한**: `최고 관리자`, `관리자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-05171`
**재해복구작업 롤백 대기시간 연장**

사용자의 그룹이 Owner 인 보호그룹 재해복구작업의 롤백 대기시간을 연장한다.
`최고 관리자` 역할의 사용자는 모든 보호그룹 재해복구작업의 롤백 대기시간을 연장할 수 있다.

모의훈련 유형의 재해복구작업은 완료(completed) 상태이거나 롤백실패(clear-failed) 상태일 때 롤백 대기시간을 연장할 수 있으며,
재해복구 유형의 재해복구작업은 롤백실패(clear-failed) 상태일 때만 롤백 대기시간을 연장할 수 있다.

<sub>**사용권한**: `최고 관리자`, `관리자`, `운영자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-05181`
**재해복구작업 롤백 무시**

사용자의 그룹이 Owner 인 보호그룹의 재해복구작업을 롤백하기 않고 종료한다.
`최고 관리자` 역할의 사용자는 모든 보호그룹의 재해복구작업을 롤백하기 않고 종료할 수 있다.

롤백실패(clear-failed) 상태인 재해복구작업만 롤백을 무시할 수 있으며, 제거되지 않은 리소스들을 제거할 수 있는 스크립트를 반환한다.
> 롤백을 하지 않는 경우, 복구대상 클러스터에 재해복구를 위해 생성한 더미들이 남을 수 있으며, 사용자 혹은 기술지원을 통해 수동으로 삭제해야 한다.

재해복구작업이 종료되면, [재해복구결과 보고서가 생성](#fc-dr-06031)된다.

<sub>**사용권한**: `최고 관리자`, `관리자`, `운영자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-05183`
**재해복구작업 롤백 재시도**

사용자의 그룹이 Owner 인 보호그룹의 재해복구작업 롤백을 재시도한다.
`최고 관리자` 역할의 사용자는 보호그룹의 재해복구작업 롤백을 재시도할 수 있다.

롤백실패(clear-failed) 상태인 재해복구 유형의 재해복구작업만 롤백을 재시도할 수 있다.

<sub>**사용권한**: `최고 관리자`, `관리자`, `운영자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-05191`
**재해복구작업 확정**

사용자의 그룹이 Owner 인 보호그룹의 재해복구작업을 확정한다.
`최고 관리자` 역할의 사용자는 모든 보호그룹의 재해복구작업을 확정할 수 있다.

완료(completed) 상태인 재해복구 유형의 재해복구작업만 확정할 수 있으며, 재해복구에 사용되지 않은 보호그룹의 다른 [재해복구계획들은 삭제](#fc-dr-03051)된다.
> **실패한 재해 복구 및 취소한 재해 복구는 확정할 수 없다.**

부분 성공한 재해복구의 경우, 실패한 인스턴스와 해당 인스턴스가 의존하는 리소스는 재해복구작업 시작 전으로 롤백되며, 별도의 보호그룹과 재해복구계획으로 분리된다.

<sub>**사용권한**: `최고 관리자`, `관리자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-05192`
**재해복구작업 확정 재시도**

사용자의 그룹이 Owner 인 보호그룹의 재해복구작업 확정을 재시도한다.
`최고 관리자` 역할의 사용자는 모든 보호그룹의 재해복구작업 확정을 재시도할 수 있다.

확정실패(clear-failed) 상태인 재해복구 유형의 재해복구작업만 확정을 재시도할 수 있다.

<sub>**사용권한**: `최고 관리자`, `관리자`, `운영자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-05193`
**재해복구작업 확정 취소**

사용자의 그룹이 Owner 인 보호그룹의 재해복구작업 확정을 취소한다.
`최고 관리자` 역할의 사용자는 모든 보호그룹의 재해복구작업 확정을 취소할 수 있다.

확정실패(clear-failed) 상태인 재해복구 유형의 재해복구작업만 확정을 취소할 수 있으며,
복구대상 클러스터가 재해복구작업을 시작하기 전 상태로 롤백된다.

<sub>**사용권한**: `최고 관리자`, `관리자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-05201`
**재해복구작업 재시도 (재해복구)**

사용자의 그룹이 Owner 인 보호그룹의 재해복구작업을 재시도(다시 복구)한다.
`최고 관리자` 역할의 사용자는 모든 보호그룹의 재해복구작업을 재시도(다시 복구)할 수 있다.

완료(completed) 상태인 재해복구 유형의 재해복구작업만 재시도할 수 있으며,
일부 인스턴스들을 직전 성공여부와는 관계없이 다른 스냅샷 시점의 데이터로 다시 복구할 수 있다.

만약 재해복구작업에서 선택한 시점의 데이터가 아닌 다른 시점의 데이터로 재시도하는 경우,
데이터의 안전을 위해 인스턴스를 네트워크에 연결하지 않는다.

<sub>**사용권한**: `최고 관리자`, `관리자`, `운영자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

## 재해복구결과
### `FC-DR-09091`
**보호그룹 history 조회**

보호그룹의 history 를 조회한다.

<sub>**사용권한**: `모든 사용자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-06011`
**재해복구결과 보고서 목록 조회**

보호그룹의 재해복구결과 보고서 목록을 조회한다.

<sub>**사용권한**: `모든 사용자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-06021`
**재해복구결과 보고서 조회**

보호그룹의 재해복구결과 보고서 내용을 조회한다.

<sub>**사용권한**: `모든 사용자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-06031`
**재해복구결과 보고서 생성**

재해복구작업의 재해복구결과 보고서를 생성한다.

<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-06041`
**재해복구결과 보고서 삭제 (모의훈련)**

보호그룹의 재해복구결과 보고서를 삭제한다.

모의훈련 결과보고서만 삭제할 수 있다.

<sub>**사용권한**: `최고 관리자`, `관리자`, `운영자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

## 보호현황 모니터링
### `FC-DR-07011`
**클러스터 보호현황 모니터링**

사용자의 그룹이 Owner 인 클러스터들의 보호현황을 실시간으로 모니터링한다.

`최고 관리자` 역할의 사용자는 모든 클러스터의 보호현황을 실시간으로 모니터링할 수 있다.

<sub>**사용권한**: `모든 사용자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-07021`
**재해복구계획 보호현황 모니터링**

사용자의 그룹이 Owner 인 클러스터가 원본 클러스터로 설정된 재해복구계획의 보호현황을 실시간으로 모니터링한다.

`최고 관리자` 역할의 사용자는 모든 재해복구계획의 보호현황을 실시간으로 모니터링 할 수 있다.

<sub>**사용권한**: `모든 사용자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-07031`
**재해복구대상 인스턴스 보호현황 모니터링**

사용자의 그룹이 Owner 인 클러스터가 원본 클러스터로 설정된 재해복구계획의 특정 복구대상 인스턴스의 보호현황을 실시간으로 모니터링한다.

`최고 관리자` 역할의 사용자는 모든 복구대상 인스턴스의 보호현황을 실시간으로 모니터링 할 수 있다.

<sub>**사용권한**: `모든 사용자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-07041`
**재해복구대상 볼륨 보호현황 모니터링**

사용자의 그룹이 Owner 인 클러스터가 원본 클러스터로 설정된 재해복구계획의 특정 복제대상 볼륨의 보호현황을 실시간으로 모니터링한다.

`최고 관리자` 역할의 사용자는 모든 복제대상 볼륨의 보호현황을 실시간으로 모니터링 할 수 있다.

<sub>**사용권한**: `모든 사용자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

## 통계보고서
### `FC-DR-08011`
**통계보고서 목록 조회**

사용자의 그룹이 Owner 인 클러스터의 통계보고서 목록을 조회한다.

`최고 관리자` 역할의 사용자는 모든 클러스터의 통계보고서 목록을 조회할 수 있다.

<sub>**사용권한**: `모든 사용자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-08021`
**통계보고서 조회**

사용자의 그룹이 Owner 인 클러스터의 통계보고서 내용을 조회한다.

`최고 관리자` 역할의 사용자는 모든 클러스터의 통계보고서 내용을 조회할 수 있다.

<sub>**사용권한**: `모든 사용자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-08031`
**통계보고서 생성**

사용자의 그룹이 Owner 인 클러스터의 통계보고서를 생성한다.

`최고 관리자` 역할의 사용자는 모든 클러스터의 통계보고서를 생성할 수 있다.

<sub>**사용권한**: `최고 관리자`, `관리자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `불가능`</sub>

---

### `FC-DR-08041`
**통계보고서 삭제**

사용자의 그룹이 Owner 인 클러스터의 통계보고서를 삭제한다.

`최고 관리자` 역할의 사용자는 모든 클러스터의 통계보고서를 삭제할 수 있다.

사용자가 임의의 기간으로 생성한 클러스터 통계보고서만 삭제할 수 있다.

<sub>**사용권한**: `최고 관리자`, `관리자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-08111`
**통계보고서 생성 스케쥴 조회**

사용자의 그룹이 Owner 인 클러스터의 통계보고서 생성 스케쥴을 조회한다.

`최고 관리자` 역할의 사용자는 모든 클러스터의 통계보고서 생성 스케쥴을 조회할 수 있다.

<sub>**사용권한**: `최고 관리자`, `관리자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `불가능`</sub>

---

### `FC-DR-08121`
**통계보고서 생성 스케쥴 수정**

사용자의 그룹이 Owner 인 클러스터의 통계보고서 생성 스케쥴을 수정한다.

`최고 관리자` 역할의 사용자는 모든 클러스터의 통계보고서 생성 스케쥴을 수정할 수 있다.

<sub>**사용권한**: `최고 관리자`, `관리자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `불가능`</sub>

---

## 대시보드
### `FC-DR-10011`
**클러스터 요약 정보 조회**

클러스터 요약 정보를 조회한다.

**클러스터 요약 정보**는 다음과 같다.
- 모든 클러스터 수
- 활성화 클러스터 수
- 비활성화 클러스터 수

<sub>**사용권한**: `모든 사용자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-10021`
**보호 그룹 요약 정보 조회**

보호 그룹 요약 정보 조회를 조회한다.

**보호 그룹 요약 정보**는 다음과 같다.
- 모든 보호 그룹 수
- normal 보호 그룹 수
- warning 보호 그룹 수
- critical 보호 그룹 수
- emergency 보호 그룹 수

<sub>**사용권한**: `모든 사용자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-10031`
**인스턴스 요약 정보 조회**

인스턴스 요약 정보를 조회한다.

**인스턴스 요약 정보**는 다음과 같다.
- 모든 인스턴스 수
- 보호 인스턴스 수

<sub>**사용권한**: `모든 사용자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-10041`
**볼륨 요약 정보 조회**

볼륨 요약 정보를 조회한다.

**볼륨 요약 정보**는 다음과 같다.
- 보호 볼륨 수

<sub>**사용권한**: `모든 사용자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-10051`
**재해 복구 작업 요약 정보 조회**

재해 복구 요약 정보를 조회한다.

<sub>**사용권한**: `모든 사용자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

### `FC-DR-10061`
**클러스터 관계 목록 조회**

클러스터 관계를 조회한다.

<sub>**사용권한**: `모든 사용자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `가능`</sub>

---

## 인스턴스 템플릿
### `FC-DR-09211`
**인스턴스 템플릿 목록조회**

인스턴스 템플릿 목록을 조회한다. 

<sub>**사용권한**: `관리자`</sub>
<sub>**라이선스 만료 후 가용여부**: `불가능`</sub>

---

### `FC-DR-09221`
**인스턴스 템플릿 조회**

인스턴스 템플릿을 조회한다.

<sub>**사용권한**: `관리자`</sub>
<sub>**라이선스 만료 후 가용여부**: `불가능`</sub>

--- 

### `FC-DR-09231`
**인스턴스 템플릿 등록**

인스턴스 템플릿을 등록하며, 등록시 입력 내용은 다음과 같다.
 * 이름
 * 생성 날짜
 * 설명
 * 인스턴스들(기동 및 비기동)

템플릿의 이름은 한글, 영어, 숫자 그리고 특수 기호 중 -(하이픈), _(언더바), #(샵), .(점) 만 포함할 수 있다.

각 인스턴스들은 인스턴스의 이름으로 식별하며, auto_start_flag, dependency instance 들을 함께 저장한다. 

<sub>**사용권한**: `관리자`</sub>
<sub>**라이선스 만료 후 가용여부**: `불가능`</sub>

---

### `FC-DR-09241`
**인스턴스 템플릿 삭제**

인스턴스 템플릿을 삭제한다.

<sub>**사용권한**: `관리자`</sub>  
<sub>**라이선스 만료 후 가용여부**: `불가능`</sub>